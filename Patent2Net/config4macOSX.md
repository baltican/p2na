# Patent2net for OS X

## Python 2.7

Be sure to use a clean version of the last stable release of python 2.7 instead of the default one.
(currently 2.7.11)

The most easy way to do so is to get it with homebrew

 1. Install [Homebrew](http://brew.sh/)
 
    ````bash
        /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
    ```
    then put homebrew available on your PATH : ```export PATH=/usr/local/bin:/usr/local/sbin:$PATH```
 
 2. Get python : ```brew install python```
    
 3. Get some additional tools
    - pip : ```python easy_install pip --upgrade```
        then use it to upgrade : ```pip install pip --upgrade```        
    
    - virtualenv : ```pip install virtualenv```
        This is an usefull tool to keep your dependency independant for each project.
        ([more infos](http://docs.python-guide.org/en/latest/dev/virtualenvs/))


## Patent2Net configuration

### Download the repo (zip or git)

#### ZIP

You can get the project on git at this location [https://github.com/Patent2net/Patent2Net](https://github.com/Patent2net/Patent2Net)

To get the right version, select the V2 branch and then get the zip file.

Unpack it somewhere on your disk (on a friendly path such as '~/PatentToNet')



#### Git

Using git, you can just clone the repo and switch to the right branch ( which is currently V2)
Open a terminal then clone the repo where you want (right there is good enough, considering it the default path when you open the term ```$ cd ~```) 
```git clone -b V2 https://github.com/Patent2net/Patent2Net P2N```


The directory is renamed P2N in order to avoid confusion : we will have another directory with that same name later.  

> At this point you should have a directory with this treenode : 

- Patent2net
    - Current
    - DONNEES
    - Development
    .gitattributes
    .gitignore
    ApplicationPatent2net.exe
    ApplicationPatent2net.pdb
    ApplicationPatent2net.xml
    Licence_CeCILL_V2-en.txt
    Readme.md


### Configure a local python environement
 1. Create the env :
    on the root directory  of the project, exectute the following : 
    ```virtualenv p2nenv```
    
    You can change the name of the environement at your convenience 
    
    > To use this new environement use this command :
    > 
    ```source p2nenv/bin/activate```

 2. Get the project python dependency
    once the virtual environement is running, 
    exectute this cmd to install a few lib needed to use Patent2net
    
    ```pip install -r Development/requirements.txt```
    
    This is just a list of dependances : 
        
        ```txt
            pyparsing==1.5.7
            python-epo-ops-client==2.1.0
            requests==2.9.1
            networkx==1.10
            pydot==1.0.2
            beautifulsoup4==4.4.1
            numpy==1.10.4
            matplotlib==1.5.1
            python-louvain==0.3
        ```
 3. In order to work, the files generated by the process need a specific arborescence : 
 > rename ```Development``` into ```Patent2Net``` 
 
### Requete configuration
macOS seeem to have trouble with non-declared property, as such please use the full template

Copy the ```./Patent2net/requete.cql``` file into the root directory (```./requete.cql```) then open it and change at least the request property with your request and the DataDirectory with a related title
(you will find all the gatherd data into this directory, in ```./DONNEES/yourRequestDirectory```.

> You can copy then open the file from the command Line with the following command : 
    
    ``` 
        $ cp ./Patent2net/requete.cql ./requete.cql
        $ nano requete.cql
    ```


### Get an api key for epo base

We need to provide a key to be granted authorization to makes the request to the Patent database.

- Create a file named ```cles-epo.txt``` at the root of the project and copy your key into the file.

### Launch the Gathering process

1. Be sure you are using the python virtual environment
    (you should have the command line prefixed with the name you choosed for you venv)

2. Enter the Patent2net directory :
    ```$ cd ./Patent2net```
    then exectute the ```GatherProcess.sh``` file with 
    ```$ sh GatherProcess.sh``` 

### Create a script to launch the gathering more easily

At the root of the project create a init.sh file
```./init.sh
    echo '################################################'
    echo '# Activating local python                      #'
    echo '################################################'
    source p2nenv/bin/activate

    echo '################################################'
    echo '# Starting gathering process                   #'
    echo '################################################'
    cd Patent2net/
    sh GatherProcess.sh
````

> This is usefull to remove step in the process
and because it seem to have problems with relative path if you try to exectute ```GatherProcess.sh``` directly from the root directory 

